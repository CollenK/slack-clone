<!DOCTYPE html>
<html>
  <head>
    <title>SlackClone</title>
    <%= csrf_meta_tags %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    <script src="data:application/octet-stream;base64,d2luZG93LkZvbnRBd2Vzb21lQ29uZmlnID0gewogIGFzeW5jRW5hYmxlZDogdHJ1ZSwKICBhdXRvQWNjZXNzaWJpbGl0eTogdHJ1ZSwKICB1c2VVcmw6ICJ1c2UuZm9udGF3ZXNvbWUuY29tIiwKICBjb2RlOiAiZGQ4NTEyNGVhNCIsCiAgd2ViRm9udExvYWRlclZlcnNpb246ICIxLjYuMjQiCn07CndpbmRvdy5Gb250QXdlc29tZXx8KHdpbmRvdy5Gb250QXdlc29tZT17fSksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3RoaXMuZWw9YTtmb3IodmFyIGI9YS5jbGFzc05hbWUucmVwbGFjZSgvXlxzK3xccyskL2csIiIpLnNwbGl0KC9ccysvKSxjPTA7YzxiLmxlbmd0aDtjKyspZC5jYWxsKHRoaXMsYltjXSl9ZnVuY3Rpb24gYihhLGIsYyl7T2JqZWN0LmRlZmluZVByb3BlcnR5P09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIse2dldDpjfSk6YS5fX2RlZmluZUdldHRlcl9fKGIsYyl9aWYoISgidW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvdy5FbGVtZW50fHwiY2xhc3NMaXN0ImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkpe3ZhciBjPUFycmF5LnByb3RvdHlwZSxkPWMucHVzaCxlPWMuc3BsaWNlLGY9Yy5qb2luO2EucHJvdG90eXBlPXthZGQ6ZnVuY3Rpb24oYSl7dGhpcy5jb250YWlucyhhKXx8KGQuY2FsbCh0aGlzLGEpLHRoaXMuZWwuY2xhc3NOYW1lPXRoaXMudG9TdHJpbmcoKSl9LGNvbnRhaW5zOmZ1bmN0aW9uKGEpe3JldHVybi0xIT10aGlzLmVsLmNsYXNzTmFtZS5pbmRleE9mKGEpfSxpdGVtOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzW2FdfHxudWxsfSxyZW1vdmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5jb250YWlucyhhKSl7Zm9yKHZhciBiPTA7Yjx0aGlzLmxlbmd0aCYmdGhpc1tiXSE9YTtiKyspO2UuY2FsbCh0aGlzLGIsMSksdGhpcy5lbC5jbGFzc05hbWU9dGhpcy50b1N0cmluZygpfX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gZi5jYWxsKHRoaXMsIiAiKX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnRhaW5zKGEpP3RoaXMucmVtb3ZlKGEpOnRoaXMuYWRkKGEpLHRoaXMuY29udGFpbnMoYSl9fSx3aW5kb3cuRE9NVG9rZW5MaXN0PWEsYihFbGVtZW50LnByb3RvdHlwZSwiY2xhc3NMaXN0IixmdW5jdGlvbigpe3JldHVybiBuZXcgYSh0aGlzKX0pfX0oKSxmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXt2YXIgYyxkPVtdLGU9YixmPWUuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsLGc9IkRPTUNvbnRlbnRMb2FkZWQiLGg9KGY/L15sb2FkZWR8XmMvOi9ebG9hZGVkfF5pfF5jLykudGVzdChlLnJlYWR5U3RhdGUpO2h8fGUuYWRkRXZlbnRMaXN0ZW5lcihnLGM9ZnVuY3Rpb24oKXtmb3IoZS5yZW1vdmVFdmVudExpc3RlbmVyKGcsYyksaD0xO2M9ZC5zaGlmdCgpOyljKCl9KSxoP3NldFRpbWVvdXQoYSwwKTpkLnB1c2goYSl9ZnVuY3Rpb24gZSgpe3ZhciBhLGMsZCxlPWIucXVlcnlTZWxlY3RvckFsbCgiLmZhIik7QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlLGZ1bmN0aW9uKGUpe2E9ZS5nZXRBdHRyaWJ1dGUoInRpdGxlIiksZS5zZXRBdHRyaWJ1dGUoImFyaWEtaGlkZGVuIiwidHJ1ZSIpLGM9ZS5uZXh0RWxlbWVudFNpYmxpbmc/IWUubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5jb250YWlucygic3Itb25seSIpOiEwLGEmJmMmJihkPWIuY3JlYXRlRWxlbWVudCgic3BhbiIpLGQuaW5uZXJIVE1MPWEsZC5jbGFzc0xpc3QuYWRkKCJzci1vbmx5IiksZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkLGUubmV4dFNpYmxpbmcpKX0pfWZ1bmN0aW9uIGYoYSl7InVuZGVmaW5lZCIhPXR5cGVvZiBNdXRhdGlvbk9ic2VydmVyJiZuZXcgTXV0YXRpb25PYnNlcnZlcihhKS5vYnNlcnZlKGIse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSl9ZnVuY3Rpb24gZygpe3ZhciBhPWIuY3JlYXRlRWxlbWVudCgibGluayIpO2EuaHJlZj0iaHR0cHM6Ly8iK2wrIi8iK20rIi5jc3MiLGEubWVkaWE9ImFsbCIsYS5yZWw9InN0eWxlc2hlZXQiLGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXS5hcHBlbmRDaGlsZChhKX1mdW5jdGlvbiBoKCl7dmFyIGM9Yi5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxkPXt9O3M9Yi5zY3JpcHRzWzBdLGEuV2ViRm9udENvbmZpZ3x8KGEuV2ViRm9udENvbmZpZz17fSksZD1hLldlYkZvbnRDb25maWcsZC5jdXN0b218fChkLmN1c3RvbT17fSksZC5jdXN0b20uZmFtaWxpZXN8fChkLmN1c3RvbS5mYW1pbGllcz1bXSksZC5jdXN0b20udXJsc3x8KGQuY3VzdG9tLnVybHM9W10pLGQuY3VzdG9tLmZhbWlsaWVzLnB1c2goIkZvbnRBd2Vzb21lIiksZC5jdXN0b20udXJscy5wdXNoKCJodHRwczovLyIrbCsiLyIrbSsiLmNzcyIpLGMuc3JjPSJodHRwczovLyIrbCsiL3dlYmZvbnRsb2FkZXIvIituKyIvd2ViZm9udGxvYWRlci5qcyIscy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjLHMpfWZ1bmN0aW9uIGkoKXtyZXR1cm4gayYmKGQoZSksZihlKSksaj9oKCk6ZygpfXZhciBqPWEuRm9udEF3ZXNvbWVDb25maWcuYXN5bmNFbmFibGVkLGs9YS5Gb250QXdlc29tZUNvbmZpZy5hdXRvQWNjZXNzaWJpbGl0eSxsPWEuRm9udEF3ZXNvbWVDb25maWcudXNlVXJsLG09YS5Gb250QXdlc29tZUNvbmZpZy5jb2RlLG49YS5Gb250QXdlc29tZUNvbmZpZy53ZWJGb250TG9hZGVyVmVyc2lvbjthLkZvbnRBd2Vzb21lLmxvYWQ9aX0odGhpcyxkb2N1bWVudCk7dHJ5e3dpbmRvdy5Gb250QXdlc29tZS5sb2FkKCl9Y2F0Y2goZSl7fQ=="></script>
  </head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span>
            <%= link_to ("<i class='fa fa-comments-o fa-2x'></i> " +'Chat App').html_safe, root_path,
                                                                          class: "navbar-brand" %>
          </span>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <% if user_signed_in? %>
              <%= yield :right_nav %>

              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                aria-haspopup="true" aria-expanded="false"><%= current_user.username %>
                <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><%= link_to "Settings", edit_user_registration_path %></li>
                  <li role="separator" class="divider"></li>
                  <li><%= link_to "Logout", destroy_user_session_path, method: :delete %></li>
                </ul>
              </li>
            <% else %>
              <li><%= link_to "Sign Up", new_user_registration_path %></li>
              <li><%= link_to "Login", new_user_session_path %></li>
            <% end %>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>

    <div class="fluid-container">
      <div class="row">
        <div class="col-sm-2 left-sidebar">
          <% if user_signed_in? %>
            <h5>Chatrooms</h5>
            <ul>
              <% current_user.chatrooms.each do |chatroom| %>
                <li><%= link_to chatroom.name, chatroom, data: {behavior: "chatroom-link", chatroom_id: chatroom.id} %></li>
              <% end %>
            </ul>
          <% end %>
        </div>

        <div class="col-sm-10 col-sm-offset-2">
          <%= yield %>
        </div>
      </div> <!-- /row -->
    </div> <!-- /container-fluid -->

  </body>
</html>
